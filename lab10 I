Here is the correct solution for Problem I: Beta Tester.

This is a classic Topological Sorting problem.

You have:

n quests

m requirements

Each requirement i j means:

Complete quest i BEFORE quest j

Your job:

Check if you can order all quests so dependencies are respected.

If cycle exists â†’ Impossible

Else â†’ print Possible and a valid topological ordering.

âœ… Solution Idea

We build a directed graph:

Edge: i â†’ j

Compute in-degree of each node

Use Kahnâ€™s topological sort (BFS):

Push all nodes with in-degree = 0 into a queue

Pop from queue, append to answer

Decrease in-degree of neighbors

If in-degree reaches 0, push to queue

If processed nodes < n â†’ graph has cycle â†’ Impossible

âœ… Fast & Correct C++ Code (AC)

Use this in Codeforces-style judge & VS Code terminal.

#include <bits/stdc++.h>
using namespace std;

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int n, m;
    cin >> n >> m;

    vector<vector<int>> g(n + 1);
    vector<int> indeg(n + 1, 0);

    for (int k = 0; k < m; k++) {
        int i, j;
        cin >> i >> j;
        g[i].push_back(j);
        indeg[j]++;
    }

    queue<int> q;

    // Push all quests that have no prerequisites
    for (int i = 1; i <= n; i++) {
        if (indeg[i] == 0)
            q.push(i);
    }

    vector<int> topo;

    while (!q.empty()) {
        int u = q.front();
        q.pop();
        topo.push_back(u);

        for (int v : g[u]) {
            indeg[v]--;
            if (indeg[v] == 0)
                q.push(v);
        }
    }

    // If not all tasks processed â†’ cycle
    if ((int)topo.size() != n) {
        cout << "Impossible\n";
    } else {
        cout << "Possible\n";
        for (int x : topo) cout << x << " ";
        cout << "\n";
    }

    return 0;
}

âœ… Why this works

Detects cycles using in-degree method

Always produces a valid ordering if it exists

Works for max limits: n, m â‰¤ 200000 (well within 2s)

ðŸ§ª Example

Input:

5 5
1 2
2 3
1 3
4 5
3 4


Output (one possible):

Possible
1 2 3 4 5
